{% extends 'admin/admin.twig' %}

{% import 'macros/admin.twig' as admin %}

{% block style %}
    <link rel="stylesheet" href="{{ base_url() }}/assets/css/tables.css" />
{% endblock %}

{% block content %}
    <div class="uk-flex uk-margin uk-flex-between">
        <a href="{{ path_for('admin_servers_list') }}" class="uk-button uk-button-secondary">
            {{ trans('buttons', 'back') }}
        </a>
        <div class="uk-flex">
            {{ admin.edit_btn(path_for('admin_servers_edit', {'server': server.id})) }}
            {{ admin.delete_btn(path_for('admin_servers_delete', {'server': server.id})) }}
        </div>
    </div>
<div class="uk-card uk-card-default uk-card-body uk-width-1-1@m">
    <div class="uk-card uk-card-secondary uk-grid-collapse uk-child-width-1-2@s uk-margin" uk-grid>
        <div class="uk-card-media-left uk-cover-container">
            <img src="{{ base_url() }}/assets/images/blank600x400.png" alt="" uk-cover>
            <canvas width="600" height="400"></canvas>
        </div>
        <div>
            <div class="uk-card-body">
                <h3 class="uk-card-title">{{ server.name }}</h3>
                <h5><a href="steam://coonect/{{ server.ip }}:{{ server.port }}">{{ server.ip }}:{{ server.port }}</a></h5>
                <div f-table f-divider>
                    <ul>
                        <li>Create At</li>
                        <li>{{ server.created_at }}</li>
                    </ul>
                    <ul>
                        <li>Update At</li>
                        <li>{{ server.updated_at }}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="uk-card uk-card-default uk-card-body uk-width-1-1@m">
    {% set hasPermissionsForView = has_access_permission('admin', 'player', 'view') %}
    <div f-table f-divider>
        <ul th>
            <li class="uk-width-1-3@m uk-width-2-3@s uk-visible@s">Nick</li>
            <li class="uk-width-1-3@m uk-width-1-3@s uk-visible@s">STEAM_ID</li>
            <li class="uk-width-1-3@m uk-width-1-3@s uk-visible@s">IP</li>
        </ul>
        {% for player in server.players %}
            <ul>
                <li class="uk-width-1-3@m uk-width-1-3@s">
                    {% if hasPermissionsForView %}
                        <a href="{{ path_for('admin_players_list') }}">{{ player.nick }}</a>
                    {% else %}
                        {{ player.nick }}
                    {% endif %}
                </li>
                <li class="uk-width-1-3@m uk-width-1-3@s">{{ player.steamid }}</li>
                <li class="uk-width-1-3@m uk-width-1-3@s">{{ player.ip }}</li>
            </ul>
        {% endfor %}
    </div>
</div>
{% endblock %}
